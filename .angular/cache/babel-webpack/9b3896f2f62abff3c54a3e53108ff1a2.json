{"ast":null,"code":"import _asyncToGenerator from \"/home/johnmakris/Dev/vscProjects/angularProjects/thesis/pms-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport { debounceTime, distinctUntilChanged, tap, switchMap } from 'rxjs/operators';\nimport { merge, fromEvent } from \"rxjs\";\nimport { SchoolsDataSource } from '../common/tableDataHelper/schools.datasource';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../school.service\";\nimport * as i2 from \"src/app/common/snackbars/snackbar.service\";\nimport * as i3 from \"@angular/flex-layout/flex\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/flex-layout/extended\";\nimport * as i6 from \"@angular/material/divider\";\nimport * as i7 from \"@angular/router\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/form-field\";\nimport * as i10 from \"@angular/material/input\";\nimport * as i11 from \"@angular/material/icon\";\nimport * as i12 from \"@angular/material/table\";\nimport * as i13 from \"@angular/material/sort\";\nimport * as i14 from \"@angular/material/paginator\";\nimport * as i15 from \"@angular/material/core\";\nconst _c0 = [\"input\"];\n\nfunction SchoolListComponent_button_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function SchoolListComponent_button_16_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.clearInput();\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\", 20);\n    i0.ɵɵtext(2, \"close\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction SchoolListComponent_mat_header_cell_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 21);\n    i0.ɵɵtext(1, \"ID\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction SchoolListComponent_mat_cell_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"number\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const school_r10 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, school_r10.id));\n  }\n}\n\nfunction SchoolListComponent_mat_header_cell_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 21);\n    i0.ɵɵtext(1, \"Name\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction SchoolListComponent_mat_cell_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const school_r11 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(school_r11.name);\n  }\n}\n\nfunction SchoolListComponent_mat_header_row_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-header-row\");\n  }\n}\n\nfunction SchoolListComponent_mat_row_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-row\", 22);\n  }\n\n  if (rf & 2) {\n    const row_r12 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"detail/\", row_r12.id, \"\");\n  }\n}\n\nconst _c1 = function () {\n  return [3, 5];\n};\n\nexport class SchoolListComponent {\n  constructor(schoolService, snackbarService) {\n    this.schoolService = schoolService;\n    this.snackbarService = snackbarService;\n    this.isLoading = false;\n    this.submitted = false;\n    this.totalItems = 0;\n    this.currentPage = 0;\n    this.currentPageItems = 0;\n    this.currentColumnDef = 'id';\n    this.currentActivityState = '';\n    this.displayedColumns = ['id', 'name'];\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    this.dataSource = new SchoolsDataSource(this.schoolService);\n    this.dataSource.loadSchools('', 0, 3, 'asc', this.currentColumnDef);\n    this.pageDetailSubscription = this.dataSource.pageDetailState.pipe(switchMap( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (pageDetail) {\n        _this.totalItems = pageDetail.totalItems;\n        _this.currentPageItems = pageDetail.currentPageItems;\n        _this.currentPage = pageDetail.currentPage; //console.log(\"Entered to SwitchMap\");\n\n        if (_this.currentActivityState.includes('added')) {\n          //console.log(\"I am inside switchmap added state\");\n          _this.paginator.pageIndex = pageDetail.totalPages - 1;\n\n          _this.refreshTable();\n\n          _this.currentActivityState = '';\n        }\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }())).subscribe();\n    this.snackbarSubscription = this.snackbarService.snackbarState.subscribe(state => {\n      this.currentActivityState = state.message;\n\n      if (this.currentActivityState.includes('added')) {\n        //console.log('Current State: '+this.currentState);\n        this.paginator.pageIndex = 0;\n        this.refreshTable();\n      } else if (this.currentActivityState.includes('deleted') && this.currentPageItems === 1) {\n        //console.log(\"I am inside Deleted state\");\n        //console.log(\"CURRENT PAGE: \"+this.currentPage);\n        this.paginator.pageIndex = this.currentPage - 1;\n        this.refreshTable();\n        this.currentActivityState = '';\n      } else if (this.currentActivityState.includes('updated')) {\n        this.paginator.pageIndex = this.currentPage;\n        this.refreshTable();\n      } else {\n        this.refreshTable();\n      }\n    });\n  }\n\n  ngAfterViewInit() {\n    this.sort.sortChange.subscribe(() => {\n      this.currentColumnDef = this.sort.active; //console.log(\"SORT ACTIVE: \"+this.sort.active);\n      //console.log(\"Sort changed \"+this.sort.direction);\n\n      this.paginator.pageIndex = 0;\n    });\n    fromEvent(this.input.nativeElement, 'keyup').pipe(debounceTime(150), distinctUntilChanged(), tap(() => {\n      this.paginator.pageIndex = 0;\n      this.loadSchoolsPage();\n    })).subscribe();\n    merge(this.sort.sortChange, this.paginator.page).pipe(tap(() => this.loadSchoolsPage())).subscribe();\n  }\n\n  loadSchoolsPage() {\n    this.dataSource.loadSchools(this.input.nativeElement.value, this.paginator.pageIndex, this.paginator.pageSize, this.sort.direction, this.currentColumnDef);\n  }\n\n  refreshTable() {\n    //console.log(\"INPUT VALUE: \"+this.input.nativeElement.value);\n    if (this.input.nativeElement.value === '') {\n      this.loadSchoolsPage();\n    } else {\n      this.clearInput();\n    }\n  }\n\n  clearInput() {\n    this.input.nativeElement.value = '';\n    this.loadSchoolsPage();\n  }\n\n  ngOnDestroy() {\n    this.pageDetailSubscription.unsubscribe();\n    this.snackbarSubscription.unsubscribe();\n  }\n\n}\n\nSchoolListComponent.ɵfac = function SchoolListComponent_Factory(t) {\n  return new (t || SchoolListComponent)(i0.ɵɵdirectiveInject(i1.SchoolService), i0.ɵɵdirectiveInject(i2.SnackbarService));\n};\n\nSchoolListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SchoolListComponent,\n  selectors: [[\"app-school-list\"]],\n  viewQuery: function SchoolListComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(MatPaginator, 5);\n      i0.ɵɵviewQuery(MatSort, 5);\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.input = _t.first);\n    }\n  },\n  decls: 28,\n  vars: 10,\n  consts: [[\"fxFlex\", \"30em\", \"fxFlex.gt-md\", \"30em\", \"fxFlex.md\", \"30em\", \"fxFlex.lt-md\", \"30em\", \"fxFlex.lt-sm\", \"20em\", 3, \"ngClass\", \"ngClass.lt-sm\"], [\"routerLink\", \"add\", \"mat-raised-button\", \"\", \"color\", \"primary\"], [1, \"table-container\"], [\"fxLayoutAlign\", \"center\"], [\"fxFlex\", \"60%\"], [\"fxLayout\", \"row\"], [\"matInput\", \"\", \"placeholder\", \"Search schools\"], [\"input\", \"\"], [\"matSuffix\", \"\", \"inline\", \"true\"], [\"mat-button\", \"\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", 3, \"click\", 4, \"ngIf\"], [1, \"mat-elevation-z8\"], [\"matSort\", \"\", \"matSortActive\", \"id\", \"matSortDirection\", \"asc\", \"matSortDisableClear\", \"\", 3, \"dataSource\"], [\"matColumnDef\", \"id\"], [\"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [4, \"matCellDef\"], [\"matColumnDef\", \"name\"], [4, \"matHeaderRowDef\"], [\"routerLinkActive\", \"active\", \"class\", \"table-row-style\", \"matRipple\", \"\", 3, \"routerLink\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"showFirstLastButtons\", \"\", 3, \"length\", \"pageSize\", \"pageSizeOptions\"], [\"mat-button\", \"\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", 3, \"click\"], [\"inline\", \"true\"], [\"mat-sort-header\", \"\"], [\"routerLinkActive\", \"active\", \"matRipple\", \"\", 1, \"table-row-style\", 3, \"routerLink\"]],\n  template: function SchoolListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"h1\");\n      i0.ɵɵtext(2, \"Schools\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(3, \"mat-divider\");\n      i0.ɵɵelement(4, \"br\");\n      i0.ɵɵelement(5, \"br\");\n      i0.ɵɵelementStart(6, \"a\", 1);\n      i0.ɵɵtext(7, \"Add School\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 2);\n      i0.ɵɵelementStart(9, \"div\", 3);\n      i0.ɵɵelementStart(10, \"mat-form-field\", 4);\n      i0.ɵɵelementStart(11, \"div\", 5);\n      i0.ɵɵelement(12, \"input\", 6, 7);\n      i0.ɵɵelementStart(14, \"mat-icon\", 8);\n      i0.ɵɵtext(15, \"search\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(16, SchoolListComponent_button_16_Template, 3, 0, \"button\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"div\", 10);\n      i0.ɵɵelementStart(18, \"mat-table\", 11);\n      i0.ɵɵelementContainerStart(19, 12);\n      i0.ɵɵtemplate(20, SchoolListComponent_mat_header_cell_20_Template, 2, 0, \"mat-header-cell\", 13);\n      i0.ɵɵtemplate(21, SchoolListComponent_mat_cell_21_Template, 3, 3, \"mat-cell\", 14);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵelementContainerStart(22, 15);\n      i0.ɵɵtemplate(23, SchoolListComponent_mat_header_cell_23_Template, 2, 0, \"mat-header-cell\", 13);\n      i0.ɵɵtemplate(24, SchoolListComponent_mat_cell_24_Template, 2, 1, \"mat-cell\", 14);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵtemplate(25, SchoolListComponent_mat_header_row_25_Template, 1, 0, \"mat-header-row\", 16);\n      i0.ɵɵtemplate(26, SchoolListComponent_mat_row_26_Template, 1, 1, \"mat-row\", 17);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(27, \"mat-paginator\", 18);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(13);\n\n      i0.ɵɵproperty(\"ngClass\", \"container\")(\"ngClass.lt-sm\", \"min-container\");\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"ngIf\", _r0.value);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"length\", ctx.totalItems)(\"pageSize\", 3)(\"pageSizeOptions\", i0.ɵɵpureFunction0(9, _c1));\n    }\n  },\n  directives: [i3.DefaultFlexDirective, i4.NgClass, i5.DefaultClassDirective, i6.MatDivider, i7.RouterLinkWithHref, i8.MatAnchor, i3.DefaultLayoutAlignDirective, i9.MatFormField, i3.DefaultLayoutDirective, i10.MatInput, i11.MatIcon, i9.MatSuffix, i4.NgIf, i12.MatTable, i13.MatSort, i12.MatColumnDef, i12.MatHeaderCellDef, i12.MatCellDef, i12.MatHeaderRowDef, i12.MatRowDef, i14.MatPaginator, i8.MatButton, i12.MatHeaderCell, i13.MatSortHeader, i12.MatCell, i12.MatHeaderRow, i12.MatRow, i7.RouterLinkActive, i15.MatRipple, i7.RouterLink],\n  pipes: [i4.DecimalPipe],\n  styles: [\".container[_ngcontent-%COMP%] {\\n    \\n    padding: 2em;\\n}\\n\\n.min-container[_ngcontent-%COMP%] {\\n    \\n    padding-top: 2em;\\n    padding-bottom: 2em;\\n    padding-left: 1em;\\n    padding-right: 1em;\\n}\\n\\n.table-row-style[_ngcontent-%COMP%]:hover {\\n    cursor: pointer;\\n    background-color: whitesmoke;\\n}\\n\\n.table-container[_ngcontent-%COMP%] {\\n    margin-top: 1em;\\n}\\n\\n.mat-column-id[_ngcontent-%COMP%] {\\n    max-width: 13%;\\n}\\n\\n.mat-column-name[_ngcontent-%COMP%] {\\n    max-width: 87%;\\n    margin-left: 6%;\\n}\\n\\n.selectorContainer[_ngcontent-%COMP%] {\\n    padding-bottom: 1em;\\n}\\n\\n.mat-icon-button[_ngcontent-%COMP%] {\\n    height: 1em;\\n    width: 1em;\\n    font-size: 1em;\\n    line-height: 1em;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjaG9vbC1saXN0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSwyQkFBMkI7SUFDM0IsWUFBWTtBQUNoQjs7QUFFQTtJQUNJLDJCQUEyQjtJQUMzQixnQkFBZ0I7SUFDaEIsbUJBQW1CO0lBQ25CLGlCQUFpQjtJQUNqQixrQkFBa0I7QUFDdEI7O0FBRUE7SUFDSSxlQUFlO0lBQ2YsNEJBQTRCO0FBQ2hDOztBQUVBO0lBQ0ksZUFBZTtBQUNuQjs7QUFFQTtJQUNJLGNBQWM7QUFDbEI7O0FBRUE7SUFDSSxjQUFjO0lBQ2QsZUFBZTtBQUNuQjs7QUFFQTtJQUNJLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLFdBQVc7SUFDWCxVQUFVO0lBQ1YsY0FBYztJQUNkLGdCQUFnQjtBQUNwQiIsImZpbGUiOiJzY2hvb2wtbGlzdC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRhaW5lciB7XG4gICAgLypib3JkZXI6IDJweCBzb2xpZCBibGFjazsqL1xuICAgIHBhZGRpbmc6IDJlbTtcbn1cblxuLm1pbi1jb250YWluZXIge1xuICAgIC8qYm9yZGVyOiAycHggc29saWQgYmxhY2s7Ki9cbiAgICBwYWRkaW5nLXRvcDogMmVtO1xuICAgIHBhZGRpbmctYm90dG9tOiAyZW07XG4gICAgcGFkZGluZy1sZWZ0OiAxZW07XG4gICAgcGFkZGluZy1yaWdodDogMWVtO1xufVxuXG4udGFibGUtcm93LXN0eWxlOmhvdmVyIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGVzbW9rZTtcbn1cblxuLnRhYmxlLWNvbnRhaW5lciB7XG4gICAgbWFyZ2luLXRvcDogMWVtO1xufVxuXG4ubWF0LWNvbHVtbi1pZCB7XG4gICAgbWF4LXdpZHRoOiAxMyU7XG59XG5cbi5tYXQtY29sdW1uLW5hbWUge1xuICAgIG1heC13aWR0aDogODclO1xuICAgIG1hcmdpbi1sZWZ0OiA2JTtcbn1cblxuLnNlbGVjdG9yQ29udGFpbmVyIHtcbiAgICBwYWRkaW5nLWJvdHRvbTogMWVtO1xufVxuXG4ubWF0LWljb24tYnV0dG9uIHtcbiAgICBoZWlnaHQ6IDFlbTtcbiAgICB3aWR0aDogMWVtO1xuICAgIGZvbnQtc2l6ZTogMWVtO1xuICAgIGxpbmUtaGVpZ2h0OiAxZW07XG59Il19 */\"]\n});","map":{"version":3,"sources":["/home/johnmakris/Dev/vscProjects/angularProjects/thesis/pms-frontend/src/app/schools/school-list/school-list.component.ts"],"names":["MatPaginator","MatSort","debounceTime","distinctUntilChanged","tap","switchMap","merge","fromEvent","SchoolsDataSource","i0","i1","i2","i3","i4","i5","i6","i7","i8","i9","i10","i11","i12","i13","i14","i15","_c0","SchoolListComponent_button_16_Template","rf","ctx","_r9","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","SchoolListComponent_button_16_Template_button_click_0_listener","ɵɵrestoreView","ctx_r8","ɵɵnextContext","clearInput","ɵɵtext","ɵɵelementEnd","SchoolListComponent_mat_header_cell_20_Template","SchoolListComponent_mat_cell_21_Template","ɵɵpipe","school_r10","$implicit","ɵɵadvance","ɵɵtextInterpolate","ɵɵpipeBind1","id","SchoolListComponent_mat_header_cell_23_Template","SchoolListComponent_mat_cell_24_Template","school_r11","name","SchoolListComponent_mat_header_row_25_Template","ɵɵelement","SchoolListComponent_mat_row_26_Template","row_r12","ɵɵpropertyInterpolate1","_c1","SchoolListComponent","constructor","schoolService","snackbarService","isLoading","submitted","totalItems","currentPage","currentPageItems","currentColumnDef","currentActivityState","displayedColumns","ngOnInit","dataSource","loadSchools","pageDetailSubscription","pageDetailState","pipe","pageDetail","includes","paginator","pageIndex","totalPages","refreshTable","subscribe","snackbarSubscription","snackbarState","state","message","ngAfterViewInit","sort","sortChange","active","input","nativeElement","loadSchoolsPage","page","value","pageSize","direction","ngOnDestroy","unsubscribe","ɵfac","SchoolListComponent_Factory","t","ɵɵdirectiveInject","SchoolService","SnackbarService","ɵcmp","ɵɵdefineComponent","type","selectors","viewQuery","SchoolListComponent_Query","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","decls","vars","consts","template","SchoolListComponent_Template","ɵɵtemplate","ɵɵelementContainerStart","ɵɵelementContainerEnd","_r0","ɵɵreference","ɵɵproperty","ɵɵpureFunction0","directives","DefaultFlexDirective","NgClass","DefaultClassDirective","MatDivider","RouterLinkWithHref","MatAnchor","DefaultLayoutAlignDirective","MatFormField","DefaultLayoutDirective","MatInput","MatIcon","MatSuffix","NgIf","MatTable","MatColumnDef","MatHeaderCellDef","MatCellDef","MatHeaderRowDef","MatRowDef","MatButton","MatHeaderCell","MatSortHeader","MatCell","MatHeaderRow","MatRow","RouterLinkActive","MatRipple","RouterLink","pipes","DecimalPipe","styles"],"mappings":"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","sourcesContent":["import { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport { debounceTime, distinctUntilChanged, tap, switchMap } from 'rxjs/operators';\nimport { merge, fromEvent } from \"rxjs\";\nimport { SchoolsDataSource } from '../common/tableDataHelper/schools.datasource';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../school.service\";\nimport * as i2 from \"src/app/common/snackbars/snackbar.service\";\nimport * as i3 from \"@angular/flex-layout/flex\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/flex-layout/extended\";\nimport * as i6 from \"@angular/material/divider\";\nimport * as i7 from \"@angular/router\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/form-field\";\nimport * as i10 from \"@angular/material/input\";\nimport * as i11 from \"@angular/material/icon\";\nimport * as i12 from \"@angular/material/table\";\nimport * as i13 from \"@angular/material/sort\";\nimport * as i14 from \"@angular/material/paginator\";\nimport * as i15 from \"@angular/material/core\";\nconst _c0 = [\"input\"];\nfunction SchoolListComponent_button_16_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function SchoolListComponent_button_16_Template_button_click_0_listener() { i0.ɵɵrestoreView(_r9); const ctx_r8 = i0.ɵɵnextContext(); return ctx_r8.clearInput(); });\n    i0.ɵɵelementStart(1, \"mat-icon\", 20);\n    i0.ɵɵtext(2, \"close\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n} }\nfunction SchoolListComponent_mat_header_cell_20_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 21);\n    i0.ɵɵtext(1, \"ID\");\n    i0.ɵɵelementEnd();\n} }\nfunction SchoolListComponent_mat_cell_21_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"number\");\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const school_r10 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, school_r10.id));\n} }\nfunction SchoolListComponent_mat_header_cell_23_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 21);\n    i0.ɵɵtext(1, \"Name\");\n    i0.ɵɵelementEnd();\n} }\nfunction SchoolListComponent_mat_cell_24_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const school_r11 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(school_r11.name);\n} }\nfunction SchoolListComponent_mat_header_row_25_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-header-row\");\n} }\nfunction SchoolListComponent_mat_row_26_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-row\", 22);\n} if (rf & 2) {\n    const row_r12 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"detail/\", row_r12.id, \"\");\n} }\nconst _c1 = function () { return [3, 5]; };\nexport class SchoolListComponent {\n    constructor(schoolService, snackbarService) {\n        this.schoolService = schoolService;\n        this.snackbarService = snackbarService;\n        this.isLoading = false;\n        this.submitted = false;\n        this.totalItems = 0;\n        this.currentPage = 0;\n        this.currentPageItems = 0;\n        this.currentColumnDef = 'id';\n        this.currentActivityState = '';\n        this.displayedColumns = [\n            'id',\n            'name'\n        ];\n    }\n    ngOnInit() {\n        this.dataSource = new SchoolsDataSource(this.schoolService);\n        this.dataSource.loadSchools('', 0, 3, 'asc', this.currentColumnDef);\n        this.pageDetailSubscription = this.dataSource.pageDetailState.pipe(switchMap(async (pageDetail) => {\n            this.totalItems = pageDetail.totalItems;\n            this.currentPageItems = pageDetail.currentPageItems;\n            this.currentPage = pageDetail.currentPage;\n            //console.log(\"Entered to SwitchMap\");\n            if (this.currentActivityState.includes('added')) {\n                //console.log(\"I am inside switchmap added state\");\n                this.paginator.pageIndex = pageDetail.totalPages - 1;\n                this.refreshTable();\n                this.currentActivityState = '';\n            }\n        })).subscribe();\n        this.snackbarSubscription = this.snackbarService.snackbarState.subscribe((state) => {\n            this.currentActivityState = state.message;\n            if (this.currentActivityState.includes('added')) {\n                //console.log('Current State: '+this.currentState);\n                this.paginator.pageIndex = 0;\n                this.refreshTable();\n            }\n            else if (this.currentActivityState.includes('deleted') && this.currentPageItems === 1) {\n                //console.log(\"I am inside Deleted state\");\n                //console.log(\"CURRENT PAGE: \"+this.currentPage);\n                this.paginator.pageIndex = this.currentPage - 1;\n                this.refreshTable();\n                this.currentActivityState = '';\n            }\n            else if (this.currentActivityState.includes('updated')) {\n                this.paginator.pageIndex = this.currentPage;\n                this.refreshTable();\n            }\n            else {\n                this.refreshTable();\n            }\n        });\n    }\n    ngAfterViewInit() {\n        this.sort.sortChange.subscribe(() => {\n            this.currentColumnDef = this.sort.active;\n            //console.log(\"SORT ACTIVE: \"+this.sort.active);\n            //console.log(\"Sort changed \"+this.sort.direction);\n            this.paginator.pageIndex = 0;\n        });\n        fromEvent(this.input.nativeElement, 'keyup')\n            .pipe(debounceTime(150), distinctUntilChanged(), tap(() => {\n            this.paginator.pageIndex = 0;\n            this.loadSchoolsPage();\n        }))\n            .subscribe();\n        merge(this.sort.sortChange, this.paginator.page)\n            .pipe(tap(() => this.loadSchoolsPage()))\n            .subscribe();\n    }\n    loadSchoolsPage() {\n        this.dataSource.loadSchools(this.input.nativeElement.value, this.paginator.pageIndex, this.paginator.pageSize, this.sort.direction, this.currentColumnDef);\n    }\n    refreshTable() {\n        //console.log(\"INPUT VALUE: \"+this.input.nativeElement.value);\n        if (this.input.nativeElement.value === '') {\n            this.loadSchoolsPage();\n        }\n        else {\n            this.clearInput();\n        }\n    }\n    clearInput() {\n        this.input.nativeElement.value = '';\n        this.loadSchoolsPage();\n    }\n    ngOnDestroy() {\n        this.pageDetailSubscription.unsubscribe();\n        this.snackbarSubscription.unsubscribe();\n    }\n}\nSchoolListComponent.ɵfac = function SchoolListComponent_Factory(t) { return new (t || SchoolListComponent)(i0.ɵɵdirectiveInject(i1.SchoolService), i0.ɵɵdirectiveInject(i2.SnackbarService)); };\nSchoolListComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: SchoolListComponent, selectors: [[\"app-school-list\"]], viewQuery: function SchoolListComponent_Query(rf, ctx) { if (rf & 1) {\n        i0.ɵɵviewQuery(MatPaginator, 5);\n        i0.ɵɵviewQuery(MatSort, 5);\n        i0.ɵɵviewQuery(_c0, 5);\n    } if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.input = _t.first);\n    } }, decls: 28, vars: 10, consts: [[\"fxFlex\", \"30em\", \"fxFlex.gt-md\", \"30em\", \"fxFlex.md\", \"30em\", \"fxFlex.lt-md\", \"30em\", \"fxFlex.lt-sm\", \"20em\", 3, \"ngClass\", \"ngClass.lt-sm\"], [\"routerLink\", \"add\", \"mat-raised-button\", \"\", \"color\", \"primary\"], [1, \"table-container\"], [\"fxLayoutAlign\", \"center\"], [\"fxFlex\", \"60%\"], [\"fxLayout\", \"row\"], [\"matInput\", \"\", \"placeholder\", \"Search schools\"], [\"input\", \"\"], [\"matSuffix\", \"\", \"inline\", \"true\"], [\"mat-button\", \"\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", 3, \"click\", 4, \"ngIf\"], [1, \"mat-elevation-z8\"], [\"matSort\", \"\", \"matSortActive\", \"id\", \"matSortDirection\", \"asc\", \"matSortDisableClear\", \"\", 3, \"dataSource\"], [\"matColumnDef\", \"id\"], [\"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [4, \"matCellDef\"], [\"matColumnDef\", \"name\"], [4, \"matHeaderRowDef\"], [\"routerLinkActive\", \"active\", \"class\", \"table-row-style\", \"matRipple\", \"\", 3, \"routerLink\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"showFirstLastButtons\", \"\", 3, \"length\", \"pageSize\", \"pageSizeOptions\"], [\"mat-button\", \"\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", 3, \"click\"], [\"inline\", \"true\"], [\"mat-sort-header\", \"\"], [\"routerLinkActive\", \"active\", \"matRipple\", \"\", 1, \"table-row-style\", 3, \"routerLink\"]], template: function SchoolListComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"h1\");\n        i0.ɵɵtext(2, \"Schools\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(3, \"mat-divider\");\n        i0.ɵɵelement(4, \"br\");\n        i0.ɵɵelement(5, \"br\");\n        i0.ɵɵelementStart(6, \"a\", 1);\n        i0.ɵɵtext(7, \"Add School\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 2);\n        i0.ɵɵelementStart(9, \"div\", 3);\n        i0.ɵɵelementStart(10, \"mat-form-field\", 4);\n        i0.ɵɵelementStart(11, \"div\", 5);\n        i0.ɵɵelement(12, \"input\", 6, 7);\n        i0.ɵɵelementStart(14, \"mat-icon\", 8);\n        i0.ɵɵtext(15, \"search\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(16, SchoolListComponent_button_16_Template, 3, 0, \"button\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 10);\n        i0.ɵɵelementStart(18, \"mat-table\", 11);\n        i0.ɵɵelementContainerStart(19, 12);\n        i0.ɵɵtemplate(20, SchoolListComponent_mat_header_cell_20_Template, 2, 0, \"mat-header-cell\", 13);\n        i0.ɵɵtemplate(21, SchoolListComponent_mat_cell_21_Template, 3, 3, \"mat-cell\", 14);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(22, 15);\n        i0.ɵɵtemplate(23, SchoolListComponent_mat_header_cell_23_Template, 2, 0, \"mat-header-cell\", 13);\n        i0.ɵɵtemplate(24, SchoolListComponent_mat_cell_24_Template, 2, 1, \"mat-cell\", 14);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(25, SchoolListComponent_mat_header_row_25_Template, 1, 0, \"mat-header-row\", 16);\n        i0.ɵɵtemplate(26, SchoolListComponent_mat_row_26_Template, 1, 1, \"mat-row\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(27, \"mat-paginator\", 18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r0 = i0.ɵɵreference(13);\n        i0.ɵɵproperty(\"ngClass\", \"container\")(\"ngClass.lt-sm\", \"min-container\");\n        i0.ɵɵadvance(16);\n        i0.ɵɵproperty(\"ngIf\", _r0.value);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"length\", ctx.totalItems)(\"pageSize\", 3)(\"pageSizeOptions\", i0.ɵɵpureFunction0(9, _c1));\n    } }, directives: [i3.DefaultFlexDirective, i4.NgClass, i5.DefaultClassDirective, i6.MatDivider, i7.RouterLinkWithHref, i8.MatAnchor, i3.DefaultLayoutAlignDirective, i9.MatFormField, i3.DefaultLayoutDirective, i10.MatInput, i11.MatIcon, i9.MatSuffix, i4.NgIf, i12.MatTable, i13.MatSort, i12.MatColumnDef, i12.MatHeaderCellDef, i12.MatCellDef, i12.MatHeaderRowDef, i12.MatRowDef, i14.MatPaginator, i8.MatButton, i12.MatHeaderCell, i13.MatSortHeader, i12.MatCell, i12.MatHeaderRow, i12.MatRow, i7.RouterLinkActive, i15.MatRipple, i7.RouterLink], pipes: [i4.DecimalPipe], styles: [\".container[_ngcontent-%COMP%] {\\n    \\n    padding: 2em;\\n}\\n\\n.min-container[_ngcontent-%COMP%] {\\n    \\n    padding-top: 2em;\\n    padding-bottom: 2em;\\n    padding-left: 1em;\\n    padding-right: 1em;\\n}\\n\\n.table-row-style[_ngcontent-%COMP%]:hover {\\n    cursor: pointer;\\n    background-color: whitesmoke;\\n}\\n\\n.table-container[_ngcontent-%COMP%] {\\n    margin-top: 1em;\\n}\\n\\n.mat-column-id[_ngcontent-%COMP%] {\\n    max-width: 13%;\\n}\\n\\n.mat-column-name[_ngcontent-%COMP%] {\\n    max-width: 87%;\\n    margin-left: 6%;\\n}\\n\\n.selectorContainer[_ngcontent-%COMP%] {\\n    padding-bottom: 1em;\\n}\\n\\n.mat-icon-button[_ngcontent-%COMP%] {\\n    height: 1em;\\n    width: 1em;\\n    font-size: 1em;\\n    line-height: 1em;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjaG9vbC1saXN0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSwyQkFBMkI7SUFDM0IsWUFBWTtBQUNoQjs7QUFFQTtJQUNJLDJCQUEyQjtJQUMzQixnQkFBZ0I7SUFDaEIsbUJBQW1CO0lBQ25CLGlCQUFpQjtJQUNqQixrQkFBa0I7QUFDdEI7O0FBRUE7SUFDSSxlQUFlO0lBQ2YsNEJBQTRCO0FBQ2hDOztBQUVBO0lBQ0ksZUFBZTtBQUNuQjs7QUFFQTtJQUNJLGNBQWM7QUFDbEI7O0FBRUE7SUFDSSxjQUFjO0lBQ2QsZUFBZTtBQUNuQjs7QUFFQTtJQUNJLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLFdBQVc7SUFDWCxVQUFVO0lBQ1YsY0FBYztJQUNkLGdCQUFnQjtBQUNwQiIsImZpbGUiOiJzY2hvb2wtbGlzdC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRhaW5lciB7XG4gICAgLypib3JkZXI6IDJweCBzb2xpZCBibGFjazsqL1xuICAgIHBhZGRpbmc6IDJlbTtcbn1cblxuLm1pbi1jb250YWluZXIge1xuICAgIC8qYm9yZGVyOiAycHggc29saWQgYmxhY2s7Ki9cbiAgICBwYWRkaW5nLXRvcDogMmVtO1xuICAgIHBhZGRpbmctYm90dG9tOiAyZW07XG4gICAgcGFkZGluZy1sZWZ0OiAxZW07XG4gICAgcGFkZGluZy1yaWdodDogMWVtO1xufVxuXG4udGFibGUtcm93LXN0eWxlOmhvdmVyIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGVzbW9rZTtcbn1cblxuLnRhYmxlLWNvbnRhaW5lciB7XG4gICAgbWFyZ2luLXRvcDogMWVtO1xufVxuXG4ubWF0LWNvbHVtbi1pZCB7XG4gICAgbWF4LXdpZHRoOiAxMyU7XG59XG5cbi5tYXQtY29sdW1uLW5hbWUge1xuICAgIG1heC13aWR0aDogODclO1xuICAgIG1hcmdpbi1sZWZ0OiA2JTtcbn1cblxuLnNlbGVjdG9yQ29udGFpbmVyIHtcbiAgICBwYWRkaW5nLWJvdHRvbTogMWVtO1xufVxuXG4ubWF0LWljb24tYnV0dG9uIHtcbiAgICBoZWlnaHQ6IDFlbTtcbiAgICB3aWR0aDogMWVtO1xuICAgIGZvbnQtc2l6ZTogMWVtO1xuICAgIGxpbmUtaGVpZ2h0OiAxZW07XG59Il19 */\"] });\n"]},"metadata":{},"sourceType":"module"}